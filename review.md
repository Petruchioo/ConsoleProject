# Ревью

## Общее

В проекте нет `AllComands.txt`, поэтому запустить не получается.

## ArgumentNotFoundExceptions

Скорее всего имелось ввиду: комент в классе

```csharp
namespace ConsoleProject.Exceptions
{
    internal class NoteNotFoundException : ArgumentNotFoundException
    {
        public NoteNotFoundException(int noteId) : base($"Note with ID = {id} is not found") { }
    }
}
```

*Заметка:* исключения обычно именуются в единственном числе, поэтому `Exception`.

## IService /переделал

Скорее всего лишний интерфейс, так как точкой входа приложения по сути является метод `.Menu()`, все остальные могли спокойно быть `private`.

## Note/User

Советую у пользователя вообще убрать `List<Note> Notes`. А у `Note` убрать `User Owner`. Скорее всего из-за этого перекрестия падает сериализация при сохранении.//переделал

Если нужно как-то связать `Note` и `User`, то рекомендую пока прокинуть одностороннюю связь, и сделать `int UserId` в классе `Note`. //переделал

## NoteService

- `NoteService` не должен внутри себя создавать `Service` и `UserService`. В крайнем случае получать через конструктор `IService` и `IUserService`. //переделал
- `Service` не должен заниматься валидацией строк для `NoteService`, если нужна валидация, лучше сделать отдельный класс `NoteTitleValidator` и принимать объект этого класса через конструктор. // переделал
- `UserService`. Я не уверен, насколько нам нужна проверка существования пользователя при попытке вернуть заметки. Если пользователя нет, можно вернуть пустой список. И учитывая, специфику приложения, мы вряд ли попадем в метод `GetAllNotes` с несуществующим пользователем. //не понял
- Надо бы согласовать исключения. В `DeleteNote` и `CompleteNote` если заметка не найдена идет кастомное `ArgumentNotFoundExceptions`, в части других методов в этом же случае идет `KeyNotFoundException`. Скорее всего нужно сделать кастомное исключение `NoteNotFoundException` и бросать его.
- `ShowNote` кажется лишним методом. Скорее `Service` должен вызывать `GetNoteById`/`GetAllNotes` и отображать заметку/и.
- Загрузку заметок лучше сделать отдельным `private` методом `LoadNotes` и вызывать его в конструкторе `NoteService`.
- Если нужен какой-то метод для красивого вывода заметки, то тут два пути:
    - Переопредилить `ToString` в `Note` нужным образом и вызывать `Console.WriteLine(note)` в `Service`.
    - Или сделать отдельный метод `PrintNote` в `Service` 

## UserService

- `_currentUser` не используется, можно удалить
- `Service` не должен заниматься валидацией для `UserService`.
- Лучше сделать кастомное исключение `UserNotFoundException` и бросать его.
- `SaveUser` можно сделать `private`, все равно его нет в интерфейсе. *Вообще, лучше, чтобы у класса не было `public` методов, кроме тех, что описаны в интерфейсе.*
- `ShowUser` нужно убрать и заменить примерно так же, как `ShowNote`.

## Service

- Должен использовать `INote` и `IUser`, получая через конструктор объекты классов, их реализующие.
- Поля с сервисами для заметок и пользоваетелей не должны быть `static`, как и словарь с методами для меню. Тут можно глянуть подсказку в конце дока.
- `Console.WriteLine("\nEnter team number");` - что-то явно лишнее или должно быть `command`.
- `RegistrationWindow.txt` и другие `.txt` файлы в `Service` не нужны или должны быть в проекте, чтобы можно было ими пользоваться.
- Все методы кроме `Menu`, можно сделать `private`.
- `Menu` стоит переименовать в `RunApplication` или `PrintMenu`, чтобы был глагол в названии.
- `try-catch` в методах обработки команд не нужен, так как внутри `Menu` они вызываются уже в `try-catch`.
- `Console.Clear()` можно унести в `Menu` перед вызовом `action.Invoke()`, чтобы не дублировать во всех методах обработки команд.

## Program

- Нужно создавать тут все экземпляры `NoteService`, `UserService` и передавать их в конструктор `Service`.
